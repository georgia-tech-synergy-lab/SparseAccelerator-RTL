# Makefile
# make RANDOM_SEED= TESTCASE=

#modify for your sim directory structure, mine has the following structure: /sim/compute_fp6/
PROJECT_ROOT=$(PWD)/../../

export PYTHONPATH := $(PROJECT_ROOT)/python/compute:$(PYTHONPATH)

SIM ?= modelsim
TOPLEVEL_LANG ?= verilog

X=2
Y=1

# NUM_DATA=2
# DATA_WIDTH=8
# DIVIDER_PRECISION=26
# RANDOM_TEST_ITERATIONS=10000

# MAX_ERROR=1.0

VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/vegeta_compute_top_fp6.sv

VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/vegeta_pe_fp6.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/vegeta_pu_fp6.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/vegeta_mac_fp6.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/fp6_adder.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/fp6_mult.sv

VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/adder_tree_fp6.sv


VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/general_multiplier_fp6.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/mult_normalizer_fp6.sv


VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/general_adder_fp6.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/addition_normalizer_fp6.sv

#not sure why they depend on a file with TPU in the name, I'm also guessing that this is what is meant by vTPU_pack
# VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/vTPU_pkg.sv
VERILOG_SOURCES += $(PROJECT_ROOT)/accelerator/compute_fp6/vTPU_pkg_fp6.sv


# TOPLEVEL is the name of the toplevel module in your Verilog or VHDL file
TOPLEVEL = vegeta_compute_top_fp6

# MODULE is the basename of the Python test file
MODULE = test_vegeta_compute_top

# SIM_ARGS += -gX=$(X) -gY=$(Y) -gX_SCALED=$(X) -gY_SCALED=$(Y)

PLUSARGS += +rand_test_iterations=$(RANDOM_TEST_ITERATIONS) +max_error=$(MAX_ERROR) +X=$(X) +Y=$(Y)

# include cocotb's make rules to take care of the simulator setup
include $(shell cocotb-config --makefiles)/Makefile.sim





